/* (c) Aaron Gustafson (@AaronGustafson). MIT License. http://github.com/easy-designs/jquery.easy-tooltips.js */
(function(u,x,v){var d="tooltip",n="id",e="hovering",D="[data-"+d+"]",o=u('<div class="'+d+'-box" aria-live="polite" role="alert"/>').hide(),f="#"+o.attr(n),y={},m="fast",F=u(x),t=u("body"),w=500,p=30,i=20,k=260,q=true,H=false,r=null,g=r,B=r,E=H,G=H,s="id",a,b,I,c=(new Date()).getTime(),h=("ontouchstart" in x||"createTouch" in document)?"touchstart":"click";x.watchResize=function(M){var L;function K(){clearTimeout(L);L=r;M()}F.resize(function(){if(L){clearTimeout(L);L=r}L=setTimeout(K,50)});u(M)};function l(){a=F.width();b=t.height();G=a>480}x.watchResize(l);function z(){if(!G){return}var N=u(D),M={},L=/(.+)\?(.+)=(.+)/,K;N.each(function(){var R=u(this),O=R.data(d),V=R.data("preloaded-"+d),U,T,P,Q,S;if(O!=""&&O in y){return}U=O.indexOf("?");T=U>=0?O.replace(L,"$1"):O.substr(0,O.lastIndexOf("/"));P=U>=0?O.replace(L,"$2"):"";Q=U>=0?O.replace(L,"$3"):O.substr(O.lastIndexOf("/")+1);if(O==""){if(V){O=c++;R.data(d,O);y[O]=o.clone().append(V)}else{S=R.attr("title");y[S]=o.clone().append(u("<article><p/></article>").find("p").text(S).end())}}else{if(M[T]==v){M[T]={}}if(M[T][P]==v){M[T][P]=[]}if(u.inArray(Q,M[T][P])==-1){M[T][P].push(Q)}}});u.each(M,function(O,P){u.each(P,function(R,S){$isQuery=(R!="");if($isQuery){var Q={};Q[R]=S.join(",");u.get(O,Q,function(U){var T=u("<div/>").html(U),V=T.find("."+d+"-item");V.each(function(){var X=u(this),Y=X.attr(n).replace("node-id-",""),W=O+"?"+R+"="+Y;y[W]=o.clone().append(X)})},"html")}else{u.post(O+"/"+S,function(U){var T=u("<div/>").html(U),V=T.find("."+d+"-item");V.each(function(){var X=u(this),Y=X.attr(n).replace("node-id-",""),W=O+"/"+Y;y[W]=o.clone().append(X)})},"html")}})})}u(document).ready(z);u(x).on("resize load",z);function C(N){N.preventDefault();var M=u(N.target).closest(D),L=M.data(d)||M.data(d+"title"),K=0;if(!(L in y)){z();K=w}u("."+d+"-box").fadeOut(m,function(){u(this).remove()});setTimeout(function(){J(M,y[L])},K);return H}function J(M,O){I=t.css("position");if(I=="static"){t.css("position","relative")}l();var Q=M.offset(),N=M.data("tooltip-side")||"right",R=M.data("tooltip-div"),P=M.outerWidth(),L,K;if(R==v&&O!=v){R=O.clone(q);M.data("tooltip-div",R)}R.appendTo(t).addClass(d+"-"+N);K=R.outerWidth();switch(N){case"top":L={bottom:Math.floor(b-Q.top+(p/2)),left:Q.left+(P/2),"margin-left":0-(K/2)};break;case"bottom":L={top:Math.floor(Q.top+M.outerHeight()+(p/2)),left:Q.left+(P/2),"margin-left":0-(K/2)};break;case"left":L={top:Math.floor(Q.top),right:a-Q.left+p};break;default:L={top:Math.floor(Q.top),left:Q.left+P+p}}R.css(L).fadeIn(m,function(){M.addClass(e)});E=q}function j(L){var K=u(L.target).closest(D).removeClass(e),M=K.data("tooltip-div");if(M!=v){M.fadeOut(m,function(){M.remove()})}E=H;t.css("position",I)}function A(){}x.watchResize(function(){var N=r;function K(O){var P=u(this).attr("title");if(P){u(this).removeAttr("title").data(d+"title",P)}N=setTimeout(function(){C(O)},w)}function L(O){if(N){clearTimeout(N);N=r}j(O);var P=u(this).data(d+"title");if(P){u(this).attr("title",P)}}function M(P){var O=P.which;if(O==13){u(this).triggerHandler("mouseenter")}else{if(O==27){u(this).triggerHandler("mouseleave")}}}if(!G){u(D).off("keyup",M).off("blur",L).off(h,C).off("mouseenter",K).off("mouseleave",L)}else{u(D).on("keyup",M).on("blur",L).on(h,C).on("mouseenter",K).on("mouseleave",L)}})})(jQuery,window);